# Diccionario con catálogo bibliográfico

bibliografia = {'001': {'tipo': 'Libro', 'autor': {'nombre': 'Isaac', 'apellido': 'Asimov'}, 'titulo': 'Cuentos completos 1', 'editorial': 'Debolsillo', 'fecha': '2009', 'lugar': 'Estados Unidos'}, '002': {'tipo': 'Libro', 'autor': {'nombre': 'Isaac', 'apellido': 'Asimov'}, 'titulo': 'Cuentos completos 2', 'editorial': 'Debolsillo', 'fecha': '2009', 'lugar': 'Estados Unidos'}, '003': {'tipo': 'Libro', 'autor': {'nombre': 'Yuval Noah', 'apellido': 'Harari'}, 'titulo': 'De Animales a Dioses', 'editorial': 'Debate', 'fecha': '2015', 'lugar': 'Israel'}, '004': {'tipo': 'Libro', 'autor': {'nombre': 'Yuval Noah', 'apellido': 'Harari'}, 'titulo': 'Homo Deus', 'editorial': 'Debate', 'fecha': '2016', 'lugar': 'Israel'}, '005': {'tipo': 'Libro', 'autor': {'nombre': 'Trevor', 'apellido': 'Noah'}, 'titulo': 'Prohibido Nacer', 'editorial': 'Blackie Books', 'fecha': '2017', 'lugar': 'España'}, '006': {'tipo': 'Libro', 'autor': {'nombre': 'Carolina', 'apellido': 'Sanín'}, 'titulo': 'Somos Luces Abismales', 'editorial': 'Penguin Random House', 'fecha': '2018', 'lugar': 'Colombia'}, '007': {'tipo': 'Libro', 'autor': {'nombre': 'Andrei', 'apellido': 'Kurkov'}, 'titulo': 'Muerte con Pingüino', 'editorial': 'Blackie Books', 'fecha': '1996', 'lugar': 'España'}, '008': {'tipo': 'Libro', 'autor': {'nombre': 'Andrés', 'apellido': 'Caicedo'}, 'titulo': 'Que Viva la Música!', 'editorial': 'Debolsillo', 'fecha': '1977', 'lugar': 'Colombia'}, '009': {'tipo': 'Libro', 'autor': {'nombre': 'Alex', 'apellido': 'Garland'}, 'titulo': 'The Beach', 'editorial': 'Viking', 'fecha': '1996', 'lugar': 'Reino Unido'}, '010': {'tipo': 'Libro', 'autor': {'nombre': 'Arturo', 'apellido': 'Quirantes'}, 'titulo': 'La teoria del todo', 'editorial': 'National Geographic', 'fecha': '2018', 'lugar': 'España'}, '011': {'tipo': 'Libro', 'autor': {'nombre': 'Tom', 'apellido': 'Jackson'}, 'titulo': 'Breve historia de la ciencia', 'editorial': 'BLUME (Naturart)', 'fecha': '2022', 'lugar': 'España'}, '012': {'tipo': 'Libro', 'autor': {'nombre': 'Jose', 'apellido': 'Saramago'}, 'titulo': 'Ensayo sobre la ceguera', 'editorial': 'Debolsillo', 'fecha': '1995', 'lugar': 'España'}, '013': {'tipo': 'Artículo  Revista', 'autor': {'nombre': 'Steven', 'apellido': 'Heller'}, 'titulo': 'Dreaming in Colors', 'editorial': 'Eye Magazine Ltd.', 'fecha': '2016', 'lugar': 'Londrés, Reino Unido', 'revista': 'Eye: The International Review of Graphic Design', 'volumen': ' 23', 'numero': '91', 'url': 'https://www.proquest.com/docview/234948863/E32953D8051F41A5PQ/2?accountid=34489'}, '014': {'tipo': 'Artículo  Revista', 'autor': {'nombre': 'Peter L.', 'apellido': 'Forberg'}, 'titulo': 'Critical Design as Theory, Experiment, and Data: A Sociologically-Informed Approach to Visualizing Networks of Loss', 'editorial': '', 'fecha': '2022', 'lugar': 'Providence, Estados Unidos', 'revista': 'Digital Humanities Quarterly', 'volumen': '16', 'numero': '4', 'url': 'https://ezproxy.uniandes.edu.co:8443/login?url=https://www.proquest.com/scholarly-journals/critical-design-as-theory-experiment-data/docview/2715485146/se-2'}, '015': {'tipo': 'Artículo  Revista', 'autor': {'nombre': 'Antony', 'apellido': 'Tang'}, 'titulo': 'What makes software design effective?', 'editorial': 'Delft University of Technology', 'fecha': '06-10-2010', 'lugar': 'Paises Bajos', 'revista': 'Design Studies', 'volumen': '31', 'numero': '6', 'url': 'https://www-sciencedirect-com.ezproxy.uniandes.edu.co/science/article/pii/S0142694X10000669'}, '016': {'tipo': 'Artículo Periódico', 'autor': {'nombre': 'Kashmir', 'apellido': 'Hill'}, 'titulo': 'This Tool Could Protect Artists From A.I.-Generated Art That Steals Their Style', 'fecha': '13-02-2023', 'lugar': 'Nueva York, Estados Unidos', 'periodico': 'The New York Times', 'seccion': 'Business', 'url': 'https://www.nytimes.com/2023/02/13/technology/ai-art-generator-lensa-stable-diffusion.html'}, '017': {'tipo': 'Artículo Periódico', 'autor': {'nombre': 'Dan', 'apellido': 'Sinykin'}, 'titulo': 'How computational analysis is teaching us to read in new ways', 'fecha': '30-07-2018', 'lugar': 'Washington, Estados Unidos', 'periodico': 'The Washington Post', 'seccion': 'Posteverything, Perspective', 'url': 'https://www.washingtonpost.com/news/posteverything/wp/2018/07/30/how-computational-analysis-is-teaching-us-to-read-in-new-ways/'}, '018': {'tipo': 'Artículo Periódico', 'autor': {'nombre': 'Laura', 'apellido': 'Pappano'}, 'titulo': 'Learning to Think Like a Computer', 'fecha': '09-04-2017', 'lugar': 'New York, Estados Unidos', 'periodico': ' The New York Times', 'seccion': 'Education Life', 'url': 'https://www.nytimes.com/2017/04/04/education/edlife/teaching-students-computer-code.html'}, '019': {'tipo': 'Vídeo Youtube', 'autor': {'nombre': '', 'apellido': ''}, 'titulo': 'Maratón HD de la Red Colombiana de Humanidades Digitales: Santiago Ojeda y Juan Pablo Moya', 'fecha': '15-09-2020', 'canal': 'Facultad de Artes y Humanidades Uniandes', 'url': 'https://www.youtube.com/watch?v=Ijf8Ysq2pFg&t=124s'}, '020': {'tipo': 'Vídeo Youtube', 'autor': {'nombre': 'Sergio', 'apellido': 'Rodríguez'}, 'titulo': 'Glosario HD: Visualización de datos', 'fecha': '27-03-2021', 'canal': 'Red Colombiana de Humanidades Digitales', 'url': 'https://www.youtube.com/watch?v=hU758BJazyo&t=2s'}, '021': {'tipo': 'Vídeo Youtube', 'autor': {'nombre': 'Nicolás', 'apellido': 'Schurmann'}, 'titulo': 'Aprende GIT ahora! curso completo GRATIS desde cero', 'fecha': '18-02-2022', 'canal': 'HolaMundo', 'url': 'https://www.youtube.com/watch?v=VdGzPZ31ts8&t=2904s'}}

# -------------------------------------------
# ACTIVIDAD 7: EJERCICIO 1

# Funcion de busqueda por palabra

def busquedapalabra(diccionario):
    '''Busca una cadena de caracteres en el título de los elementos de un catálogo bibliográfico.
     
    PARAMETROS
    --------
    diccionario (dict): Llama un diccionario con la estructura [clave]['tipo','autor','titulo','editorial','fecha','lugar','revista':revista,'volumen', 'numero','url','periodico','seccion','canal']

    - Usa la función input para guardar una palabra clave que se buscará en el catálogo.
    - La palabra se guarda en la variable "palabraclave".
    - La función busca coincidencias de palabras exactas y coincidencias de cadenas de caracteres y las imprime por aparte.
    - Imprime mensaje sino se encuentra ninguna coincidencia.
    '''

    palabraclave = input('Ingrese la palabra clave para su busqueda de título: ')
    resultadoexacto = []
    resultadoamplio = []
    resultadodiferencia = []

    for l in diccionario:
        palabras = diccionario[l]['titulo'].split(' ')
        for palabra in palabras:
            if palabraclave.lower() == palabra.lower():
                resultadoexacto.append(diccionario[l]['titulo'])
                break
    
    for l in diccionario:
        if palabraclave.lower() in diccionario[l]['titulo'].lower():
            resultadoamplio.append(diccionario[l]['titulo'])
    
    for l in resultadoamplio:
        if l not in resultadoexacto:
            resultadodiferencia.append(l)
    
    if len(resultadoexacto) > 0:
        print(f'Se encontraron {len(resultadoexacto)} elemento(s) que incluyen la palabra "{palabraclave}":')
        for x in resultadoexacto:
            print(f'- {x}')
    
    print()
    
    if len(resultadodiferencia) > 0:
        print(f'Se encontraron {len(resultadodiferencia)} elemento(s) que contienen los caracteres "{palabraclave}":')
        for x in resultadodiferencia:
            print(f'- {x}')
            
    elif len(resultadoexacto) == 0:
        print(f'No se encontraron elementos que incluyan la palabra "{palabraclave}" o que contengan esos caracteres.')

# ------------------------------------------
# ACTIVIDAD 7: EJERCICIO 2

def bus_anio_palabra(diccionario):

    '''Busca una concidencia de una cadena de caracteres en el título y una fecha por año en cada uno de los elementos de un catálogo bibliográfico.
     
    PARAMETROS
    --------
    diccionario (dict): Llama un diccionario con la estructura [clave]['tipo','autor','titulo','editorial','fecha','lugar','revista':revista,'volumen', 'numero','url','periodico','seccion','canal']

    - Usa la función input para guardar una palabra clave y un año que se buscará en el catálogo.
    - La palabra se guarda en la variable "palabraclave".
    - El año se guarda en la variable "anioclave".
    - Entrega el resultado que concide con la palabra y la fecha, pero tembien entrega resultados separados de coincidencia por palabra o fecha.
    - Imprime mensaje sino se encuentra ninguna coincidencia.
    ''' 

    aniosbiblio = [diccionario[a]['fecha'][-4:] for a in diccionario]

    palabraclave = input('Ingrese la palabra clave para su busqueda de título: ')
    print()
    
    while True:
        anioclave = input(f"""
        Ingrese el año del que quiere hacer la busqueda (YYYY)\n
        Tenga en cuenta que el catalogo tiene libros del {min(aniosbiblio)} al {max(aniosbiblio)} \n
        Año: """)
        try:
            anioclave = int(anioclave)
        except:
            pass
        if type(anioclave) == int:
            break
        else:
            print('Ingrese nuevamente el año')

    coinexacta = []
    coinpalabra = []
    coinfecha = []
    
    for l in diccionario: 
        if palabraclave.lower() in diccionario[l]['titulo'].lower() and anioclave == int(diccionario[l]['fecha'][-4:]):
            coinexacta.append(diccionario[l]['titulo'])
        elif palabraclave.lower() in diccionario[l]['titulo'].lower() and anioclave != int(diccionario[l]['fecha'][-4:]):
            coinpalabra.append(diccionario[l]['titulo'])
        elif palabraclave.lower() not in diccionario[l]['titulo'].lower() and anioclave == int(diccionario[l]['fecha'][-4:]):
            coinfecha.append(diccionario[l]['titulo'])
                
    if len(coinexacta) > 0:
        print(f'Se encontraron {len(coinexacta)} elemento(s) que incluyen la palabra "{palabraclave}" y la fecha "{anioclave}":')
        for a in coinexacta:
            print(f'- {a}')
  
    if len(coinpalabra) > 0:
        print(f'Se encontraron {len(coinpalabra)} elemento(s) que contienen la palabra "{palabraclave}" pero no la fecha "{anioclave}":')
        for a in coinpalabra:
            print(f'- {a}')
    
    if len(coinfecha) > 0:
        print(f'Se encontraron {len(coinfecha)} elemento(s) que contienen la fecha "{anioclave}" pero no la palabra "{palabraclave}":')
        for a in coinfecha:
            print(f'- {a}')
    
    if len(coinexacta) == 0 and len(coinpalabra) == 0 and len(coinfecha) == 0:
        print(f'No se encontraron elementos que contengan la palabra "{palabraclave}" o la fecha "{anioclave}":')

# ------------------------------------------
# ACTIVIDAD 7: EJERCICIO 3

def entradabiblio(diccionario):
    
    '''Le pide al usuario ingresar los datos de un nuevo elemento en el catalogo bibliográfico.
     
    PARAMETROS
    ----------
    diccionario (dict): Llama un diccionario con la estructura [clave]['tipo','autor','titulo','editorial','fecha','lugar','revista':revista,'volumen', 'numero','url','periodico','seccion','canal']

    - Usa la función input para guardar los valores de las claves del diccionario.
    - Usa el metodo "while" para asegurar la escogencia del tipo de elemento y el año como número.
    - Usa while para confirma la entrada o repertir todos los campos por parte del usuario.
    - Finalmente elimina las claves de los valores vacios.
    ''' 
    
    rep_entradas = True
    while rep_entradas:
        print('''
        Ingrese los datos del elemento bibliográfico que desea agregar al catálogo,
        si no tiene la información de algún campo solo oprima "enter"''')
        
        errorselecc = True
        while errorselecc:
            seleccion = input('''Ingrese la letra correspondiente al tipo de material que desea agregar: '
            'a. libro, b. artículo revista, c. artículo periódico, d. video youtube, e. otro
            ''')
            if seleccion == "a":
                tipo = 'libro'
                errorselecc = False
            elif seleccion == "b":
                tipo = 'artículo revista'
                errorselecc = False
            elif seleccion == "c":
                tipo = 'artículo periódico'
                errorselecc = False
            elif seleccion == "d":
                tipo = 'video youtube'
                errorselecc = False
            elif seleccion == "e":
                tipo = 'otro'
                errorselecc = False
            else:
                print("Selección errada, intente de nuevo.")
        
        apellido = input('Ingrese el\los apellido(s) del autor: ')
        nombre = input('Ingrese el primer nombre del autor: ')
        titulo = input('Ingrese el título: ')
        editorial = input('Ingrese la editorial: ')
        
        while True:
            fecha = input('Ingrese el año del que quiere ingresar (YYYY): ')
            if fecha.isdigit():
                break
            else:
                print('Ingrese nuevamente el año')

        lugar = input('Ingrese el lugar de publicación: ')
        revista = input('Ingrese la revista donde se publicó: ')
        volumen = input('Ingrese el volumen de la revista: ')
        numero = input('Ingrese número de la edición de la revista: ')
        url = input('Ingrese la URL donde se aloja el elemento: ')
        periodico = input('Ingrese el periodico donde se publicó: ')
        seccion = input('Ingrese la sección del periodico: ')
        canal = input('Ingrese el canal de Youtube: ')

        con_entradas = True
        while con_entradas:
            confirm = input('''Para continuar tecleé una de las opciones y de "enter": '
                'a. Confirmar entradas  ó  b. Repetir entradas para corregir
                ''')
            if confirm == "a":
                rep_entradas = False
                con_entradas = False
            elif confirm == "b":
                con_entradas = False
            else:
                print("Selección errada, intente de nuevo.")

    
    clave = int(list(diccionario.keys())[-1]) + 1
    clave = str(clave).zfill(3)    
        
    diccionario[clave] = {
        "tipo":tipo,
        'autor':{'nombre':nombre,'apellido': apellido},
        'titulo':titulo,
        'editorial':editorial,
        'fecha':fecha,
        'lugar':lugar,
        'revista':revista,
        'volumen':volumen,
        'numero':numero,
        'url':url,
        'periodico':periodico,
        'seccion':seccion,
        'canal':canal
    }
    
    for c in diccionario:
        for sc in list(diccionario[c]):
            if not diccionario[c][sc]:
                del diccionario[c][sc]


# ------------------------------------------
# Ejecución de las funciones creadas

busquedapalabra(bibliografia)
continuar = input("Enter para continuar")
bus_anio_palabra(bibliografia)
continuar = input("Enter para continuar")
entradabiblio(bibliografia)

# ------------------------------------------
# Impresión último elemento de la librería

print(bibliografia[list(bibliografia.keys())[-1]])